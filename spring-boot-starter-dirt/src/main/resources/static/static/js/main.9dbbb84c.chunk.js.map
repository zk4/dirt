{"version":3,"sources":["lib/query_builder/item.js","lib/query_builder/comparators.js","lib/query_builder/operators.js","lib/query_builder/functions.js","lib/query_builder/index.js","logic/util.js","logic/network.js","consts/consts.js","components/customRender.js","components/readForm.js","consts/uiConsts.js","components/richEditor.js","components/cascader.js","components/selectInput.js","components/imageUploader.js","components/selectLiveInput.js","components/writeForm.js","components/dirtTable.js","components/tree.js","App.js","index.js"],"names":["Item","Object","classCallCheck","this","constructor","TypeError","concat","name","protoLits","getPrototypeOf","unshift","superProto","shift","missing","find","some","proto","hasOwnProperty","Comparator","selector","comparatorKeyWord","_this","value","arguments","length","undefined","_super","call","Function","String","Number","Like","_super2","Equal","_super3","NotEqual","_super4","Gt","_super5","Ge","_super6","Lt","_super7","Le","_super8","IsNull","_super9","IsNotNull","_super10","IsEmpty","_super11","IsNotEmpty","_super12","In","_len","values","Array","_key","_super13","join","Operator","operatorKeyWord","items","map","item","toString","And","_len2","_key2","apply","Or","_len3","_key3","Not","Exists","functionKeyWord","Absolute","Average","Min","Max","Sum","CurrentDate","CurrentTime","CurrentTimestamp","Size","Length","Trim","Upper","Lower","_super14","Concat","selectors","_super15","SpringFilterQueryBuilder","createClass","key","construct","toConsumableArray","isObj","o","isArray","dot","obj","desc","arr","split","axios","defaults","baseURL","interceptors","response","use","res","status","message","error","statusText","Promise","reject","data","code","reason","_error$response","_error$response$data","_error$response2","_error$response2$data","getOptionsAsync","_ref","asyncToGenerator","_regeneratorRuntime","mark","_callee","postData","ret","wrap","_context","prev","next","post","sent","abrupt","stop","_x","dot2Object","entries","reduce","p","_ref6","_ref7","slicedToArray","k","v","ks","objectSpread2","defineProperty","network","getTableHeadersAsync","_ref2","_callee2","entityName","_context2","get","_x2","getDataAsync","_ref3","_callee3","id","_context3","_x3","_x4","deleteByIdAsync","_ref4","_callee4","success_cb","_context4","_x5","_x6","_x7","deleteByIdsAsync","_ref5","_callee5","_context5","_x8","_x9","createAsync","_ref8","_callee6","_context6","_x10","_x11","_x12","updateAsync","_ref9","_callee7","_context7","_x13","_x14","_x15","actionAsync","_ref10","_callee8","_context8","_x16","_x17","getDirtFieldTypeAsync","_ref11","_callee9","_context9","_x18","_x19","searchFullAsync","_ref12","_callee10","filter","_context10","_x20","_x21","_x22","searchAsync","_ref13","_callee11","columnKeyMap","params","sort","paramsCpy","filters","filterParams","filterStr","sortQuery","sortParams","pageParam","url","keys","embeddedKeys","embeddedNestKeys","_i","_Object$keys","_args11","_context11","pageNumber","current","assign","_ref14","_ref15","_ref16","_ref17","column","searchType","valueType","SFQB","and","ge","le","Error","like","_ref18","_ref19","equal","arrow","pageSize","c","includes","d","_step","_iterator","createForOfIteratorHelper","s","n","done","err","e","f","resolve","total","page","totalPages","success","_x23","_x24","consts","None","ManyToOne","OneToOne","OneToMany","ManyToMany","Embedded","customRender","table","title","cls","idObj","console","assert","react_default","a","createElement","components_readForm","readForm","_useState","useState","_useState2","formData","setFormData","_useState3","_useState4","show","setShow","useEffect","readForm_regeneratorRuntime","headers","relation","cls2","idOfEntity","dataIndex","Consts","initialValue","_data$dataIndex","_data$dataIndex2","Fragment","b","index","SchemaForm","readonly","onInit","trigger","href","layoutType","columns","autoFocusFirstInput","submitTimeout","rowProps","gutter","colProps","span","grid","onFinish","uiConsts","password","money","textarea","date","dateTime","dateWeek","dateMonth","dateQuarter","dateYear","dateRange","dateTimeRange","time","timeRange","text","richtext","select","selectInputMultipal","selectLiveInput","selectInput","treeSelect","entitySelect","checkbox","rate","radio","radioButton","progress","percent","digit","longlat","second","avatar","switch","fromNow","image","jsonCode","color","cascader","imageUploader","group","formList","slide","richEditor","WriteView","props","setValue","innerChange","useCallback","onChange","lib_default","onBlur","theme","TableRowView","dangerouslySetInnerHTML","__html","SearchView","ReadView","subTreeName","onValueSet","options","setOptions","request","cascader_regeneratorRuntime","ds","childAlias","JSON","parse","stringify","replaceAll","loadData","selectedOptions","targetOption","loading","children","valueArrays","optionArrays","changeOnSelect","components_cascader","contentStyle","height","lineHeight","textAlign","background","fileList","setFileList","onPreview","imageUploader_regeneratorRuntime","file","src","imgWindow","reader","FileReader","readAsDataURL","originFileObj","onload","result","Image","window","open","document","write","outerHTML","antd_img_crop_esm","rotate","readOnly","upload","action","listType","newFileList","log","carousel","autoplay","style","i","push","label","fuc","size","splice","handleChange","es_select","mode","width","allowClear","tokenSeparators","placeholder","DebounceSelect","fetchOptions","_ref$debounceTimeout","debounceTimeout","objectWithoutProperties","_excluded","fetching","setFetching","_useState5","_useState6","setLoading","fetchRef","useRef","debounceFetcher","useMemo","debounce","fetchId","then","newOptions","labelInValue","showArrow","onFocus","filterOption","onSearch","notFoundContent","spin","_useState7","_useState8","func","WriteForm","triggerCompoent","isModalOpen","setIsModalOpen","createColumns","columnKey","dependColumn","UIConsts","form","type","defaultRender","formItemProps","fieldProps","writeForm_excluded","writeForm_regeneratorRuntime","username","arg","getFieldValue","subKey","args","_e$","setFieldValue","_excluded2","valueEnum","_excluded3","_excluded4","_valueArrays$slice","slice","xs","md","_excluded5","vaule","_excluded6","_excluded7","vals","input","Group","compact","target","es_button","onClick","SearchOutlined","modal","destroyOnClose","onOk","onCancel","DirtTable","rowSelection","getCheckboxProps","record","defaultSelectedRowKeys","selectedRowKeys","selectedRows","info","ids","wrapperOnFinish","actionRef","formRef","RangePicker","DatePicker","onSelected","setColumns","setColumnKeyMap","redefineHeader","renderFormItem","dirtTable_excluded","showTime","time_picker","_record$dataIndex","r","rid","generateAction","dirtTable_regeneratorRuntime","maps","searchAsyncWrapper","_args2","generateCreateForm","submitTypes","submitType","writeForm","reload","PlusOutlined","submitable","tooltip","isDetailed","postdata","popconfirm","onConfirm","className","argColumnsMap","doAction","actionName","Table","scroll","x","cardBordered","editable","columnsState","persistenceKey","persistenceType","rowKey","search","labelWidth","setting","listsHeight","syncToUrl","pagination","dateFormatter","headerTitle","toolBarRender","tableAlertRender","onCleanSelected","space","marginInlineStart","CarryOutOutlined","FormOutlined","App","tables","setTables","qs","location","ignoreQueryPrefix","setTitle","viewType","App_regeneratorRuntime","t","marginBottom","ReactDOM","render","src_App_0","getElementById"],"mappings":"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","file":"static/js/main.9dbbb84c.chunk.js","sourcesContent":["class Item { //Abstract\n\tconstructor() {\n\t\tconst mustOverwriteMethods = [ \"toString\" ];\n\t\tif (new.target === Item) {\n\t\t\tthrow new TypeError(`Cannot construct ${new.target.name} instances directly`);\n\t\t}\n\t\tlet protoLits = [ Object.getPrototypeOf(this) ];\n\t\twhile(Object.getPrototypeOf(protoLits[0]).constructor.name !== \"Object\") { protoLits.unshift(Object.getPrototypeOf(protoLits[0])); }\n\t\tconst superProto = protoLits.shift();\n\t\tlet missing = mustOverwriteMethods.find(name => typeof superProto[name] === \"function\" && !protoLits.some(proto => proto.hasOwnProperty(name)));\n\t\tif (missing) {\n\t\t\tthrow new TypeError(`${this.constructor.name} need to overwrite ${missing}`);\n\t\t}\n\t}\n}\n\nexport { Item };","import { Item } from './item.js';\n\nclass Comparator extends Item { //Abstract\n\tconstructor(selector, comparatorKeyWord, value = undefined) {\n\t\tsuper();\n\t\tif (new.target === Comparator) {\n\t\t\tthrow new TypeError(`Cannot construct ${new.target.name} instances directly`);\n\t\t}\n\t\tif (!(selector instanceof Function || (typeof selector === 'string' || selector instanceof String))) {\n\t\t\tthrow new TypeError(`${new.target.name} parameter 'selector' must be a Function or a String!`);\n\t\t}\n\t\tif (value) {\n\t\t\tif (!(typeof value === 'string' || value instanceof String || typeof value === 'number' || value instanceof Number)) {\n\t\t\t\tthrow new TypeError(`${new.target.name} parameter 'value' must be a String or a Number!`);\n\t\t\t}\n\t\t}\n\t\tthis.selector = selector;\n\t\tthis.comparatorKeyWord = comparatorKeyWord;\n\t\tthis.value = value;\n\t}\n\n\ttoString() {\n\t\tif (this.value !== undefined) {\n\t\t\tif (typeof this.value === 'number' || this.value instanceof Number) {\n\t\t\t\treturn `${this.selector} ${this.comparatorKeyWord} ${this.value}`;\n\t\t\t} else {\n\t\t\t\treturn `${this.selector} ${this.comparatorKeyWord} '${this.value}'`;\n\t\t\t}\n\t\t} else {\n\t\t\treturn `${this.selector} ${this.comparatorKeyWord}`;\n\t\t}\n\t}\n}\n\nclass Like extends Comparator {\n\tconstructor(selector, value) {\n\t\tsuper(selector, \"~\", value);\n\t}\n}\n\nclass Equal extends Comparator {\n\tconstructor(selector, value) {\n\t\tsuper(selector, \":\", value);\n\t}\n}\n\nclass NotEqual extends Comparator {\n\tconstructor(selector, value) {\n\t\tsuper(selector, \"!\", value);\n\t}\n}\n\nclass Gt extends Comparator {\n\tconstructor(selector, value) {\n\t\tsuper(selector, \">\", value);\n\t}\n}\n\nclass Ge extends Comparator {\n\tconstructor(selector, value) {\n\t\tsuper(selector, \">:\", value);\n\t}\n}\n\nclass Lt extends Comparator {\n\tconstructor(selector, value) {\n\t\tsuper(selector, \"<\", value);\n\t}\n}\nclass Le extends Comparator {\n\tconstructor(selector, value) {\n\t\tsuper(selector, \"<:\", value);\n\t}\n}\n\nclass IsNull extends Comparator {\n\tconstructor(selector) {\n\t\tsuper(selector, \"IS NULL\");\n\t}\n}\n\nclass IsNotNull extends Comparator {\n\tconstructor(selector) {\n\t\tsuper(selector, \"IS NOT NULL\");\n\t}\n}\n\nclass IsEmpty extends Comparator {\n\tconstructor(selector) {\n\t\tsuper(selector, \"IS EMPTY\");\n\t}\n}\n\nclass IsNotEmpty extends Comparator {\n\tconstructor(selector) {\n\t\tsuper(selector, \"IS NOT EMPTY\");\n\t}\n}\n\nclass In extends Comparator {\n\tconstructor(selector, ...values) {\n\t\tsuper(selector, \"IN\", \"('\" + values.join(\"', '\") + \"')\");\n\t}\n\n\ttoString() {\n\t\treturn `${this.selector} ${this.comparatorKeyWord} ${this.value}`;\n\t}\n\n}\n\nexport { Comparator, Like, Equal, NotEqual, Gt, Ge, Lt, Le, IsNull, IsNotNull, IsEmpty, IsNotEmpty, In };","import { Item } from './item.js';\nimport { Comparator } from './comparators.js';\n\nclass Operator extends Item { //Abstract\n\tconstructor(operatorKeyWord, ...items) {\n\t\tsuper();\n\t\tif (new.target === Operator) {\n\t\t\tthrow new TypeError(\"Cannot construct \" + new.target.name + \" instances directly\");\n\t\t}\n\t\tthis.operatorKeyWord = operatorKeyWord;\n\t\tthis.items = items;\n\t}\n\n\ttoString() {\n\t\treturn  \"(\" + this.items.map(item => item.toString()).join(` ${this.operatorKeyWord} `) + \")\";\n\t}\n}\n\nclass And extends Operator {\n\tconstructor(...items) {\n\t\tsuper(\"AND\", ...items);\n\t}\n}\n\nclass Or extends Operator {\n\tconstructor(...items) {\n\t\tsuper(\"OR\", ...items);\n\t}\n}\n\nclass Not extends Operator {\n\tconstructor(item) {\n\t\tif (!(item instanceof Operator || item instanceof Comparator)) {\n\t\t\tthrow new TypeError(`${new.target.name} parameter 'item' must be a Operator or a Comparator!`);\n\t\t}\n\t\tsuper(\"NOT\", item);\n\t}\n}\n\nclass Exists extends Operator {\n\tconstructor(item) {\n\t\tif (!(item instanceof Operator || item instanceof Comparator)) {\n\t\t\tthrow new TypeError(`${new.target.name} parameter 'item' must be a Operator or a Comparator!`);\n\t\t}\n\t\tsuper(\"EXISTS\", item);\n\t}\n}\n\nexport { Operator, And, Or, Not, Exists };","import { Item } from './item.js';\nimport { Comparator } from './comparators.js';\n\nclass Function extends Item { //Abstract\n\tconstructor(functionKeyWord, selector) {\n\t\tif (new.target === Comparator) {\n\t\t\tthrow new TypeError(\"Cannot construct \" + new.target.name + \" instances directly\");\n\t\t}\n\t\tif (!(typeof selector === 'string' || selector instanceof String)) {\n\t\t\tthrow new TypeError(new.target.name + \" parameter 'selector' must be a String!\");\n\t\t}\n\t\tsuper();\n\t\tthis.selector = selector;\n\t\tthis.functionKeyWord = functionKeyWord;\n\t}\n\n\ttoString() {\n\t\tif (this.selector !== undefined) {\n\t\t\treturn this.functionKeyWord + \"(\" + this.selector + \")\";\n\t\t} else {\n\t\t\treturn this.functionKeyWord + \"()\";\n\n\t\t}\n\t}\n}\n\nclass Absolute extends Function {\n\tconstructor(selector) {\n\t\tsuper(\"ABSOLUTE\", selector);\n\t}\n}\n\nclass Average extends Function {\n\tconstructor(selector) {\n\t\tsuper(\"AVERAGE\", selector);\n\t}\n}\n\nclass Min extends Function {\n\tconstructor(selector) {\n\t\tsuper(\"MIN\", selector);\n\t}\n}\n\nclass Max extends Function {\n\tconstructor(selector) {\n\t\tsuper(\"MAX\", selector);\n\t}\n}\n\nclass Sum extends Function {\n\tconstructor(selector) {\n\t\tsuper(\"SUM\", selector);\n\t}\n}\n\nclass CurrentDate extends Function {\n\tconstructor() {\n\t\tsuper(\"CURRENTDATE\");\n\t}\n}\n\nclass CurrentTime extends Function {\n\tconstructor() {\n\t\tsuper(\"CURRENTTIME\");\n\t}\n}\n\nclass CurrentTimestamp extends Function {\n\tconstructor() {\n\t\tsuper(\"CURRENTTIMESSTAMP\");\n\t}\n}\n\nclass Size extends Function {\n\tconstructor(selector) {\n\t\tsuper(\"SIZE\", selector);\n\t}\n}\n\nclass Length extends Function {\n\tconstructor(selector) {\n\t\tsuper(\"LENGTH\", selector);\n\t}\n}\n\nclass Trim extends Function {\n\tconstructor(selector) {\n\t\tsuper(\"TRIM\", selector);\n\t}\n}\n\nclass Upper extends Function {\n\tconstructor(selector) {\n\t\tsuper(\"UPPER\", selector);\n\t}\n}\n\nclass Lower extends Function {\n\tconstructor(selector) {\n\t\tsuper(\"LOWER\", selector);\n\t}\n}\n\nclass Concat extends Function {\n\tconstructor(...selectors) {\n\t\tsuper(\"CONCAT\", \"('\" + selectors.join(\", \") + \"')\");\n\t}\n}\n\nexport { Function, Absolute, Average, Min, Max, Sum, CurrentDate, CurrentTime, CurrentTimestamp, Size, Length, Trim, Upper, Lower, Concat };","import { Like, Equal, NotEqual, Gt, Ge, Lt, Le, IsNull, IsNotNull, IsEmpty, IsNotEmpty, In } from './comparators.js';\nimport { And, Or, Not, Exists } from './operators.js';\nimport { Absolute, Average, Min, Max, Sum, CurrentDate, CurrentTime, CurrentTimestamp, Size, Length, Trim, Upper, Lower, Concat } from './functions.js';\n\nexport class SpringFilterQueryBuilder {\n\tstatic and(...items) {\n\t\treturn new And(...items);\n\t}\n\n\tstatic or(...items) {\n\t\treturn new Or(...items);\n\t}\n\n\tstatic not(item) {\n\t\treturn new Not(item);\n\t}\n\n\tstatic exists(item) {\n\t\treturn new Exists(...item);\n\t}\n\n\tstatic like(selector, value) {\n\t\treturn new Like(selector, value);\n\t}\n\n\tstatic equal(selector, value) {\n\t\treturn new Equal(selector, value);\n\t}\n\n\tstatic notEqual(selector, value) {\n\t\treturn new NotEqual(selector, value);\n\t}\n\n\tstatic gt(selector, value) {\n\t\treturn new Gt(selector, value);\n\t}\n\n\tstatic ge(selector, value) {\n\t\treturn new Ge(selector, value);\n\t}\n\n\tstatic lt(selector, value) {\n\t\treturn new Lt(selector, value);\n\t}\n\n\tstatic le(selector, value) {\n\t\treturn new Le(selector, value);\n\t}\n\n\tstatic isNull(selector, value) {\n\t\treturn new IsNull(selector, value);\n\t}\n\n\tstatic isNotNull(selector, value) {\n\t\treturn new IsNotNull(selector, value);\n\t}\n\n\tstatic isEmpty(selector, value) {\n\t\treturn new IsEmpty(selector, value);\n\t}\n\n\tstatic isNotEmpty(selector, value) {\n\t\treturn new IsNotEmpty(selector, value);\n\t}\n\n\tstatic in(selector, ...value) {\n\t\treturn new In(selector, ...value);\n\t}\n\n\tstatic absolute(selector) {\n\t\treturn new Absolute(selector);\n\t}\n\n\tstatic average(selector) {\n\t\treturn new Average(selector);\n\t}\n\n\tstatic min(selector) {\n\t\treturn new Min(selector);\n\t}\n\n\tstatic max(selector) {\n\t\treturn new Max(selector);\n\t}\n\n\tstatic sum(selector) {\n\t\treturn new Sum(selector);\n\t}\n\n\tstatic currentDate(selector) {\n\t\treturn new CurrentDate(selector);\n\t}\n\n\tstatic currentTime(selector) {\n\t\treturn new CurrentTime(selector);\n\t}\n\n\tstatic currentTimestamp(selector) {\n\t\treturn new CurrentTimestamp(selector);\n\t}\n\n\tstatic size(selector) {\n\t\treturn new Size(selector);\n\t}\n\n\tstatic length(selector) {\n\t\treturn new Length(selector);\n\t}\n\n\tstatic trim(selector) {\n\t\treturn new Trim(selector);\n\t}\n\n\tstatic upper(selector) {\n\t\treturn new Upper(selector);\n\t}\n\n\tstatic lower(selector) {\n\t\treturn new Lower(selector);\n\t}\n\n\tstatic concat(selector) {\n\t\treturn new Concat(selector);\n\t}\n}","\nfunction isObj(o) {\n  return typeof o === 'object' &&\n    !Array.isArray(o) &&\n    o !== null\n}\n\nfunction dot(obj, desc) {\n    var arr = desc.split(\".\");\n    while(arr.length && (obj = obj[arr.shift()]));\n    return obj;\n}\nexport {\n  isObj,\n  dot\n}\n","import axios from 'axios';\nimport {message} from 'antd';\nimport {SpringFilterQueryBuilder as SFQB} from '../lib/query_builder';\nimport {isObj, dot} from './util'\n\n// respone拦截器\n\naxios.defaults.baseURL = 'dirt/'\n\n// 添加响应拦截器\naxios.interceptors.response.use(function (res) {\n  if (res.status != 200) {\n    message.error(res.statusText);\n    return Promise.reject(res.statusText);\n  }\n  // compatiable with  wrapper response \n  if (isObj(res) && 'data' in res && isObj(res.data) && 'code' in res.data) {\n    if (res.data.code === 0) {\n      // message.success('成功');\n      return res.data;\n    } else {\n      let reason = \"\"\n      if ('data' in res.data) {\n        reason = Array.isArray(res.data.data) ? res.data.data.join(\";\") : res.data.data;\n      } else if ('message' in res.data) {\n        reason = res.data.message\n      }\n      message.error(reason);\n      return Promise.reject(reason);\n    }\n\n  } else {\n    return res;\n  }\n}, function (error) {\n  message.error(error?.response?.data?.error);\n  // 超出 2xx 范围的状态码都会触发该函数。\n  // 对响应错误做点什么\n  return Promise.reject(error?.response?.data?.error);\n});\nconst getOptionsAsync = async (postData) => {\n  let ret = await axios.post(`getOptions`, postData || {})\n  // success_cb && success_cb()\n  return ret.data;\n}\nconst getEntitySchemaAsync = async (entityName) => {\n  const ret = await axios.get(`getEntitySchema?entityName=${entityName}`)\n  return ret.data;\n}\n\nconst getDataAsync = async (entityName, id) => {\n  const ret = await axios.get(`getData?entityName=${entityName}&id=${id}`)\n  return ret.data;\n}\n\nconst deleteByIdAsync = async (entityName, id, success_cb) => {\n  let ret = await axios.post(`deleteById`, {entityName, id})\n  success_cb && success_cb()\n  return ret.data;\n}\nconst deleteByIdsAsync = async (postData, success_cb) => {\n  const ret = axios.post('deleteByIds', postData)\n  success_cb && success_cb();\n  return ret.data;\n}\n\nconst dot2Object = (values) => {\n\n  let newV = Object.entries(values).reduce((p, [k, v]) => {\n    let ks = k.split(\".\")\n    if (ks.length > 1)\n      p[ks[0]] = {[ks[1]]: v, ...p[ks[0]]}\n    else\n      p[k] = v\n\n    return p\n  }, {})\n  return newV;\n}\n\nconst createAsync = async (entityName, values, success_cb) => {\n  // 转换 {a.b:1,a.d:2,e:3} ==> {a:{b:1,d:2},e:3}\n  // 主要用在 embeded 处理中\n  // embeded value 会带有. \n  // 如 loation.lontitude   loation.lontitude\n\n  const ret = await axios.post(`create?entityName=${entityName}`, dot2Object(values))\n  success_cb && success_cb();\n  return ret.data;\n}\nconst updateAsync = async (entityName, postData, success_cb) => {\n  const ret = await axios.post(`update?entityName=${entityName}`, dot2Object(postData))\n  success_cb && success_cb();\n  return ret.data;\n}\nconst actionAsync = async (postData, success_cb) => {\n  const ret = await axios.post(`action`, postData)\n  success_cb && success_cb();\n  return ret.data;\n}\n\nconst getDirtFieldTypeAsync = async (postData, success_cb) => {\n  const ret = await axios.post(`getDirtFieldType`, postData)\n  success_cb && success_cb();\n  return ret.data;\n}\nconst getFullDataslAsync = async (entityName, filter, success_cb) => {\n  const ret = await axios.post(`getFullDatas?entityName=${entityName}`, {filter})\n  success_cb && success_cb();\n  return ret.data;\n}\nconst getDatasAsync = async (entityName, columnKeyMap, params = {}, sort, filter, success_cb) => {\n  // 映射 current 到 pageNumber\n  params.pageNumber = params.current;\n  delete params[\"current\"];\n\n  // 制作 JPA filters\n  let paramsCpy = Object.assign({}, params)\n  delete paramsCpy[\"pageNumber\"];\n  delete paramsCpy[\"pageSize\"];\n\n\n  const filters = Object.entries(params)\n    .filter(([key, value]) => {\n      return key !== 'pageNumber' && key !== 'pageSize' && value\n    })\n\n    // 处理 eFilterOperator \n    .map(([key, value]) => {\n      if (Array.isArray(value)) {\n        let column = columnKeyMap[key];\n        if (column.searchType.valueType === \"dateTimeRange\"\n          || column.searchType.valueType === \"dateRange\"\n          || column.searchType.valueType === \"timeRange\"\n        ) {\n          return SFQB.and(SFQB.ge(key, value[0]), SFQB.le(key, value[1]));\n        } else {\n          throw new Error(\"未实现\");\n        }\n      } else if (typeof (value) == 'string') {\n        if (value.length > 0)\n          return SFQB.like(key, `${value}`);\n        return null;\n      } else {\n        if (isObj(value)) {\n          // convert key {a:1,b:1} ==>  \"key.a : 1 AND key.b : 2\"\n          return Object.entries(value).map(([k, v]) => SFQB.equal(key + '.' + k, v))\n        }\n        else {\n          return SFQB.equal(key, `${value}`);\n        }\n      }\n    })\n\n  // 手动组装spring-filter \n  let filterParams = \"\"\n  //  全部组装成 and 条件，在 table　里没有例外\n  let filterStr = SFQB.and(...filters).toString();\n  //  复合spring-filter 标准\n  if (filterStr !== \"()\") {filterParams = {filter: filterStr}}\n\n\n  // 制作 JPA page 里的sort\n  let sortQuery = Object.entries(sort)\n    .map(v => {\n      let arrow = \"desc\"\n      if (v[1] === \"ascend\")\n        arrow = \"asc\"\n      return v[0] + \",\" + arrow\n    })\n    .join('&')\n  let sortParams = \"\"\n  if (sortQuery.length)\n    sortParams = `&sort=${sortQuery}`;\n\n  // params.pageNumber-1 从 0 页开始\n  const pageParam = `&size=${params.pageSize}&page=${params.pageNumber - 1}`\n\n  let url = `getDatas?entityName=${entityName}${pageParam}${sortParams}`;\n\n  // 要符合 ProTalbe 的数据格式\n  let ret = await axios.post(url, {...filterParams});\n  // rebuilding  ret.data for embedded .  ------------------------------------start\n  // Ex: location.lontitude  => location: {longitude}\n  let keys = Object.keys(columnKeyMap)\n  const embeddedKeys = keys.filter(c => c.includes(\".\"))\n\n  ret.data = ret.data.map(d => {\n    for (const k of embeddedKeys) {\n      const v = dot(d, k)\n      d[k] = v;\n    }\n    return d;\n  })\n\n  let embeddedNestKeys = embeddedKeys.reduce((p, k) => {\n    let ks = k.split(\".\")\n    if (ks.length > 1)\n      p[ks[0]] = {[ks[1]]: null, ...p[ks[0]]}\n    else\n      p[k] = null\n\n    return p\n  }, {})\n\n  // 删除嵌套的 key\n  for (const k of Object.keys(embeddedNestKeys)) {\n    delete ret.data[k]\n  }\n  // rebuilding  ret.data for embedded .  ------------------------------------end\n  return new Promise(\n    (resolve, reject) => {\n      resolve({\n        data: ret.data,\n        total: ret.page.totalPages * ret.page.pageSize,\n        success: true\n      });\n\n    }\n  );\n}\nexport default {\n  getTableHeadersAsync: getEntitySchemaAsync,\n  getDataAsync,\n  deleteByIdAsync,\n  deleteByIdsAsync,\n  createAsync,\n  updateAsync,\n  getOptionsAsync,\n  actionAsync,\n  getDirtFieldTypeAsync,\n  searchFullAsync: getFullDataslAsync,\n  searchAsync: getDatasAsync\n}\n\n\n\n","export default {\n  None: \"None\",\n  ManyToOne: \"ManyToOne\",\n  OneToOne: \"OneToOne\",\n  OneToMany: \"OneToMany\",\n  ManyToMany: \"ManyToMany\",\n  Embedded: \"Embedded\",\n}\n","import React from 'react';\nimport ReadForm from './readForm'\nimport {isObj} from '../logic/util'\nexport default {\n  table: (title, cls, idObj) => {\n    if(idObj==null) \n    {\n      return\n    }\n    if (isObj(idObj)) {\n      console.assert(idObj.id,\"必须有 id\"+idObj)\n      return <ReadForm key={cls + idObj.id} title={title} id={idObj.id} cls={cls} name={idObj?.name} />\n    }\n    else {\n      console.assert(idObj,\"必须有 id\"+idObj)\n      return <ReadForm key={cls + idObj} title={title} id={idObj} cls={cls}/>\n    }\n  },\n  readForm: (title, cls, idObj) => {\n    if(idObj==null) \n    {\n      return\n    }\n    if (isObj(idObj))\n    {\n      console.assert(idObj.id,\"必须有 id\"+idObj)\n      return <ReadForm key={cls + idObj.id} title={title} id={idObj.id} cls={cls} name={idObj?.name} />\n      }\n    else\n    {\n      console.assert(idObj,\"必须有 id\"+idObj)\n      return <ReadForm key={cls + idObj} title={title} id={idObj} cls={cls} />\n      }\n  }\n}\n\n","import React, {\n  useState,\n  useEffect,\n} from 'react';\nimport {BetaSchemaForm, } from '@ant-design/pro-components';\nimport network from '../logic/network'\nimport Consts from \"../consts/consts\"\nimport customRender from './customRender'\nimport {isObj} from '../logic/util';\n\nexport default function ({title, cls, id, name}) {\n  let [formData, setFormData] = useState([])\n  // 如果没有 name，则使用 id\n  if (name == null) name = id\n  const [show, setShow] = useState(false);\n\n  useEffect(\n    () => {\n      show && (async () => {\n        let headers = await network.getTableHeadersAsync(cls)\n        let data = await network.getDataAsync(cls, id)\n        headers = headers.map(d => {\n          const {relation, idOfEntity: cls2, id, title, dataIndex} = d;\n          if (relation === Consts.None) {\n            d.initialValue = data[d.key];\n          }\n          // 有 relation，要做嵌套显示处理\n          else if (relation === Consts.OneToOne || relation === Consts.ManyToOne) {\n            d.initialValue = customRender.readForm(title, cls2, data[dataIndex]?.id);\n          }\n          else if (relation === Consts.OneToMany || relation === Consts.ManyToMany) {\n            d.initialValue = <>\n              {\n                data[dataIndex]?.map(c => {return customRender.readForm(title, cls2, c)})\n              }\n            </>\n          } else {\n            // why here ????\n            debugger\n          }\n\n          return d;\n        }).sort((a, b) => a.index - b.index);\n        setFormData(headers)\n      })()\n    }\n    , [show, cls, id])\n\n  return <BetaSchemaForm\n    title={title + \":\" + id}\n    readonly={true}\n    onInit={e => setShow(true)}\n    trigger={<a href=\"#/\"> {name} </a>}\n    layoutType='ModalForm'\n    columns={formData}\n    autoFocusFirstInput\n    submitTimeout={4000}\n    rowProps={{gutter: [16, 16]}}\n    colProps={{span: 12, }}\n    grid={true}\n    onFinish={v => {setShow(false);}} >\n  </BetaSchemaForm>\n}\n","export default {\n  //密码输入框\n  password: \"password\",\n  //金额输入框\n  money: \"money\",\n  //文本域\n  textarea: \"textarea\",\n  //日期\n  date: \"date\",\n  //日期时间\n  dateTime: \"dateTime\",\n  //周\n  dateWeek: \"dateWeek\",\n  //月\n  dateMonth: \"dateMonth\",\n  //季度输入\n  dateQuarter: \"dateQuarter\",\n  //年份输入\n  dateYear: \"dateYear\",\n  //日期区间\n  dateRange: \"dateRange\",\n  //日期时间区间\n  dateTimeRange: \"dateTimeRange\",\n  //时间\n  time: \"time\",\n  //时间区间\n  timeRange: \"timeRange\",\n  //文本框\n  text: \"text\",\n  //富文本\n  richtext: \"richtext\",\n  //下拉框\n  select: \"select\",\n  selectInputMultipal:\"selectInputMultipal\",\n  selectLiveInput:\"selectLiveInput\",\n  //可下拉，可输入\n  selectInput:\"selectInput\",\n  //树形下拉框\n  treeSelect: \"treeSelect\",\n\n  entitySelect: \"entitySelect\",\n  // 多选框\n  checkbox: \"checkbox\",\n  //星级组件\n  rate: \"rate\",\n  //单选框\n  radio: \"radio\",\n  //按钮单选框\n  radioButton: \"radioButton\",\n  //进度条\n  progress: \"progress\",\n  //百分比组件\n  percent: \"percent\",\n  //数字输入框\n  digit: \"digit\",\n  // 经纬度\n  longlat: \"longlat\",\n  //秒格式化\n  second: \"second\",\n  //头像\n  avatar: \"avatar\",\n  //代码框\n  code: \"code\",\n  //开关 switch, switch 是关键字\n  \"switch\": \"switch\",\n  //相对于当前时间\n  fromNow: \"fromNow\",\n  //图片\n  image: \"image\",\n  //代码框，但是带了 json 格式化\n  jsonCode: \"jsonCode\",\n  //颜色选择器\n  color: \"color\",\n  //级联选择器\n  cascader: \"cascader\",\n\n  // 图片上传\n  imageUploader: \"imageUploader\",\n\n  group: \"group\",\n  formList: \"formList\",\n  slide: \"slide\"\n}\n","import React, {useState, useCallback} from 'react';\nimport ReactQuill from 'react-quill';\nimport 'react-quill/dist/quill.snow.css';\n\n\n//TODO: 回车才设值，测试先这样吧 \nfunction WriteView(props) {\n  const [value, setValue] = useState(props.value || '');\n  let innerChange = useCallback((value) => {\n    setValue(value);\n    props.onChange && props.onChange(value);\n  }, [props.onChange])\n  return <ReactQuill onBlur={e => {\n  }} theme=\"snow\" value={value} onChange={v => innerChange(v)} />;\n}\n\nfunction TableRowView(props) {\n  return <div dangerouslySetInnerHTML={{__html: props.value}} />;\n}\nexport default {\n  WriteView,\n  TableRowView,\n  SearchView: null,\n  ReadView: null,\n}\n","import {Cascader} from 'antd';\nimport React, {useState, useEffect} from 'react';\nimport network from '../logic/network'\n\nconst dataAdapter = (ds, childAlias) => {\n  if (ds) {\n    var obj = JSON.parse(JSON.stringify(ds)\n      .replaceAll(\"\\\"name\\\":\", \"\\\"label\\\":\")\n      .replaceAll(\"\\\"id\\\":\", \"\\\"value\\\":\")\n      .replaceAll(\"\\\"\" + childAlias + \"\\\":\", \"\\\"children\\\":\")\n    );\n    return obj;\n  }\n  return ds;\n}\nconst SearchView = (props) => {\n  const {idOfEntity, subTreeName,onValueSet} = props;\n  const [options, setOptions] = useState([]);\n\n  const request = async (id) => {\n    let data = []\n    if (id == null) {\n      data = await network.searchFullAsync(idOfEntity, \"(name : 'root')\");\n      data = data[0]\n    } else {\n      data = await network.getDataAsync(idOfEntity, id);\n    }\n    return data ? dataAdapter(data[subTreeName], subTreeName) : []\n  }\n  useEffect(() => {\n    (async () => {\n      let d = await request(null)\n      setOptions(d)\n    })()\n  }, [])\n\n  const onChange = (valueArrays, optionArrays) => {\n    onValueSet(valueArrays, optionArrays)\n  };\n\n  const loadData = async (selectedOptions) => {\n    const targetOption = selectedOptions[selectedOptions.length - 1];\n    targetOption.loading = true; // load options lazily\n    let id = targetOption.value\n    let d = await request(id)\n    targetOption.children = d;\n    targetOption.loading = false;\n    setOptions([...options]);\n  };\n\n  return <Cascader options={options} loadData={loadData} onChange={onChange} changeOnSelect />;\n};\n\n// export default App;\nexport default {\n  WriteView: SearchView,\n  TableRowView: null,\n  SearchView,\n  ReadView: null,\n}\n\n","import {Select,SelectProps,message} from 'antd';\nimport React, {useState, useEffect,useCallback} from 'react';\nimport network from '../logic/network'\n\nconst options = [];\nfor (let i = 10; i < 36; i++) {\n  options.push({\n    value: i.toString(36) + i,\n    label: i.toString(36) + i,\n  });\n}\nconst handleChange = (value) => {\n  console.log(`selected ${value}`);\n};\nconst SearchView = (props) => {\n\n  const [value, setValue] = useState([]);\n  \n  let fuc= useCallback((e)=>{\n    let a = e;\n    // debugger\n    if(props.size){\n      if(props.size < e.length)\n      {\n        // message.error('超出可输大小');\n        a = a.splice(a.length-props.size,props.size)\n      }\n    }\n      setValue(a)\n      props.handleChange(a)\n  })\n  return ( <Select\n    mode=\"tags\"\n    style={{\n      width: '100%',\n    }}\n    value={value}\n    allowClear={true}\n    tokenSeparators={[',']}\n    placeholder={props.placeholder}\n    onChange={fuc}\n    options={props.options}\n  />)\n};\n\n// export default App;\nexport default {\n  WriteView: SearchView,\n  TableRowView: null,\n  SearchView,\n  ReadView: null,\n}\n\n","import React, {useState} from 'react';\nimport {Upload, Carousel} from 'antd';\nimport ImgCrop from 'antd-img-crop';\n\nfunction WriteView(props) {\n  const [fileList, setFileList] = useState([\n    // {\n    //   uid: '-1',\n    //   name: 'image.png',\n    //   status: 'done',\n    //   url: 'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png',\n    // },\n  ]);\n\n  const onChange = ({fileList: newFileList}) => {\n    console.log(newFileList)\n    setFileList(newFileList);\n  };\n\n  const onPreview = async (file) => {\n    let src = file.url;\n\n    if (!src) {\n      src = await new Promise((resolve) => {\n        const reader = new FileReader();\n        reader.readAsDataURL(file.originFileObj);\n\n        reader.onload = () => resolve(reader.result);\n      });\n    }\n\n    const image = new Image();\n    image.src = src;\n    const imgWindow = window.open(src);\n    const a = imgWindow?.document.write(image.outerHTML);\n  };\n\n  return (\n    <ImgCrop rotate readOnly>\n      <Upload\n        action=\"http://127.0.0.1:8081/dirt/upload\"\n        listType=\"picture-card\"\n        fileList={fileList}\n        onChange={onChange}\n        onPreview={onPreview}\n      >\n        {fileList.length < 5 && '+ Upload'}\n      </Upload>\n    </ImgCrop>\n  );\n};\n\n\nconst contentStyle = {\n  height: '160px',\n  color: '#fff',\n  lineHeight: '160px',\n  textAlign: 'center',\n  background: '#364d79',\n};\n\nconst TableRowView = () => (\n  <Carousel autoplay>\n    <div>\n      <h3 style={contentStyle}>1</h3>\n    </div>\n    <div>\n      <h3 style={contentStyle}>2</h3>\n    </div>\n    <div>\n      <h3 style={contentStyle}>3</h3>\n    </div>\n    <div>\n      <h3 style={contentStyle}>4</h3>\n    </div>\n  </Carousel>\n);\nexport default {\n  WriteView,\n  TableRowView,\n  SearchView: null,\n  ReadView: null,\n}\n","import { Select, Spin } from 'antd';\nimport debounce from 'lodash/debounce';\nimport React, { useMemo, useRef, useState,useCallback } from 'react';\nfunction DebounceSelect({ fetchOptions, debounceTimeout = 100, ...props }) {\n  const [fetching, setFetching] = useState(false);\n  const [options, setOptions] = useState([]);\n  const [loading, setLoading] = useState(false);\n  \n  const fetchRef = useRef(0);\n  const debounceFetcher = useMemo(() => {\n    setOptions([])\n    const loadOptions = (value) => {\n      fetchRef.current += 1;\n      const fetchId = fetchRef.current;\n      // setOptions([]);\n      setFetching(true);\n      setLoading(true)\n      fetchOptions(value).then((newOptions) => {\n        setLoading(false)\n        if (fetchId !== fetchRef.current) {\n          // for fetch callback order\n          return;\n        }\n        setOptions(newOptions);\n        setFetching(false);\n      });\n    };\n    return debounce(loadOptions, debounceTimeout);\n  }, [fetchOptions, debounceTimeout]);\n  return (\n    <Select\n      labelInValue\n      showArrow\n      loading={loading}\n      onFocus={debounceFetcher}\n      filterOption={false}\n      onSearch={debounceFetcher}\n      notFoundContent={fetching ? <Spin size=\"small\" /> : null}\n      {...props}\n      options={options}\n    />\n  );\n}\n\n// Usage of DebounceSelect\n\nconst SearchView = (props) => {\n  const [value, setValue] = useState(props.value || []);\n  let func= useCallback((e)=>{\n  let a = e;\n  // debugger\n  if(props.size){\n    if(props.size < e.length)\n    {\n      // message.error('超出可输大小');\n      a = a.splice(a.length-props.size,props.size)\n    }\n  }\n    setValue(a)\n    props.onChange(a)\n})\n\n  return (\n    <DebounceSelect\n      mode=\"tags\"\n      value={value}\n      placeholder=\"Select users\"\n      fetchOptions={props.fetchOptions}\n      onChange={func}\n      style={{\n        width: '100%',\n      }}\n    />\n  );\n};\n// export default App;\nexport default {\n  WriteView: SearchView,\n  TableRowView: null,\n  SearchView,\n  ReadView: null,\n}\n\n","import React, {useState, useRef, useEffect, useCallback} from 'react';\nimport {BetaSchemaForm} from '@ant-design/pro-components';\nimport DirtTable from './dirtTable'\nimport {Modal, Input, Button} from 'antd';\nimport Consts from '../consts/consts'\nimport UIConsts from '../consts/uiConsts'\nimport customRender from './customRender'\nimport RichText from './richEditor'\nimport Cascader from './cascader'\nimport ImageUploader from './imageUploader'\nimport SelectInput from './selectInput'\nimport SelectLiveInput from './selectLiveInput'\nimport network from '../logic/network'\nimport {SearchOutlined} from '@ant-design/icons';\n\nlet WriteForm = (props) => {\n  const {entityName, name, triggerCompoent, columns, onFinish, onInit} = props;\n  // debugger\n  // 有可能有多个 modal 需要保持状态，使用{}\n  const [isModalOpen, setIsModalOpen] = useState({});\n  const [fieldName, setFieldName] = useState(\"\");\n\n\n  const showModal = (name) => {\n    setIsModalOpen(s => {return {...s, [name]: true}});\n  };\n  const handleOk = (name) => {\n    setIsModalOpen(s => {return {...s, [name]: false}});\n  };\n  const handleCancel = (name) => {\n    setIsModalOpen(s => {return {...s, [name]: false}});\n  };\n  // columns.push(\n  //   {\n  //     title: '经度',\n  //     dataIndex: 'location.longitude',\n  //     valueType: 'text',\n  //     width: 'xs',\n  //     colProps: {\n  //       xs: 12,\n  //     },\n  //   })\n  // columns.push(\n  //   {\n  //     title: '纬度',\n  //     width: 'md',\n  //     dataIndex: 'location.latitude',\n  //     colProps: {\n  //       xs: 12,\n  //     },\n  //     formItemProps: {\n  //       rules: [\n  //         {\n  //           required: true,\n  //           message: '此项为必填项',\n  //         },\n  //       ],\n  //     },\n  //   },\n  // )\n\n  let createColumns = columns.map(column => {\n    const {key: columnKey, idOfEntity, relation, dependColumn} = column\n    // 自定义创建 formItem\n    if (column.valueType === UIConsts.selectLiveInput) {\n      column[\"renderFormItem\"] = (item, {type, defaultRender, formItemProps, fieldProps, ...rest}, form) => {\n        return <SelectLiveInput.WriteView\n          size={1}\n          fetchOptions={\n            async (username) => {\n              const arg = form.getFieldValue(dependColumn)\n              return network.getOptionsAsync({entityName, subKey: columnKey, args: {[dependColumn]: arg}});\n            }\n          }\n          onChange={\n            (e) => {\n              form.setFieldValue(columnKey, e?.[0]?.value)\n            }\n          }\n        />\n      }\n    }\n\n    if (column.valueType === UIConsts.selectInput) {\n      column[\"renderFormItem\"] = (item, {type, defaultRender, formItemProps, fieldProps, ...rest}, form) => {\n        let options = Object.entries(item.valueEnum).map(([k, v]) => {return {label: v.text, value: v.text}})\n        return <SelectInput.WriteView options={options} size={1} handleChange={e => {\n          form.setFieldValue(columnKey, e[0])\n        }} />\n      }\n    }\n    if (column.valueType === UIConsts.selectInputMultipal) {\n      column[\"renderFormItem\"] = (item, {type, defaultRender, formItemProps, fieldProps, ...rest}, form) => {\n        let options = Object.entries(item.valueEnum).map(([k, v]) => {return {label: v.text, value: v.text}})\n        return <SelectInput.WriteView options={options} handleChange={e => {\n          form.setFieldValue(columnKey, e)\n        }} />\n      }\n    }\n    if (column.valueType === UIConsts.cascader) {\n      column[\"renderFormItem\"] = (item, {type, defaultRender, formItemProps, fieldProps, ...rest}, form) => {\n        // debugger\n        return <Cascader.WriteView idOfEntity={idOfEntity} subTreeName={column.subTreeName} onValueSet={(valueArrays, optionArrays) => {\n          const v = valueArrays?.slice(-1)?.[0]\n          if (v) form.setFieldValue(columnKey, {id: v})\n        }} />\n      }\n    }\n    else if (column.valueType === UIConsts.richtext) {\n      column[\"colProps\"] = {xs: 24, md: 24}\n      column[\"renderFormItem\"] = (item, {type, defaultRender, formItemProps, fieldProps, ...rest}, form) => {\n        return <RichText.WriteView key={item?.id} vaule={form.getFieldValue(columnKey)} onChange={value => {\n          form.setFieldValue(columnKey, value)\n        }} />\n      }\n    }\n    else if (column.valueType === UIConsts.imageUploader) {\n      column[\"colProps\"] = {xs: 24, md: 24}\n      column[\"renderFormItem\"] = (item, {type, defaultRender, formItemProps, fieldProps, ...rest}, form) => {\n        return <ImageUploader.WriteView key={item?.id} vaule={form.getFieldValue(columnKey)} onChange={value => {\n          form.setFieldValue(columnKey, value)\n        }} />\n      }\n    }\n    // 如果有 idOfEntity，也就是要处理 relation，弹框去查 relation\n    else if (idOfEntity) {\n      column[\"renderFormItem\"] = (item, {type, defaultRender, formItemProps, fieldProps, ...rest}, form) => {\n        const vals = form.getFieldValue(columnKey)\n        return <>\n          {/*\n          <IdHolder idObjs={form.getFieldValue(columnKey)} idOfEntity = {idOfEntity}/>\n          */}\n          <Input.Group compact>\n            <Input\n              allowClear\n              style={{\n                width: '75%',\n              }}\n              placeholder={column.placeholder}\n              value={form.getFieldValue(columnKey)}\n              onChange={\n                e => {\n                  // clear\n                  if (e.target.value == \"\" || e.target.value == {}) {\n                    if (relation === Consts.OneToMany || relation === Consts.ManyToMany) {\n                      form.setFieldValue(columnKey, [])\n                    } else if (relation === Consts.ManyToOne || relation === Consts.OneToOne) {\n                      form.setFieldValue(columnKey, null)\n                    } else {\n                      form.setFieldValue(columnKey, e.target.value)\n                    }\n                  } else {\n                    // create\n                    form.setFieldValue(columnKey, e.target.value)\n                  }\n                }\n              }\n            />\n            <Button type=\"primary\" onClick={e => {\n              showModal(columnKey)\n            }}><SearchOutlined /></Button>\n          </Input.Group>\n          {\n            vals && Array.isArray(vals) ? vals.map(v => customRender.readForm(v.id, idOfEntity, v.id))\n              : customRender.readForm(vals?.id, idOfEntity, vals?.id)\n          }\n          <Modal destroyOnClose={true} width={\"80%\"} height={\"60%\"} title={column.title} open={isModalOpen[columnKey]} onOk={e => handleOk(columnKey)} onCancel={e => handleCancel(columnKey)}>\n            <DirtTable entityName={idOfEntity}\n              rowSelection={{\n                getCheckboxProps: (record) => {\n                },\n                defaultSelectedRowKeys: vals ? Array.isArray(vals) ? vals.map(v => v.id) : [vals] : [],\n                type: (relation === Consts.OneToMany || relation === Consts.ManyToMany) ? \"checkbox\" : \"radio\",\n                onChange: (selectedRowKeys, selectedRows, info) => {\n                  // jpa compatiable\n                  if (relation === Consts.OneToMany || relation === Consts.ManyToMany) {\n                    const ids = selectedRows.map(v => {return {id: v.id}})\n                    form.setFieldValue(columnKey, ids)\n                  } else if (relation === Consts.ManyToOne || relation === Consts.OneToOne) {\n                    const ids = selectedRows.map(v => {return {id: v.id}})\n                    form.setFieldValue(columnKey, ids[0])\n                  }\n                  // Pure Id,Maybe for mabatis compatiable\n                  else {\n                    const ids = selectedRows.map(v => {return v.id})\n                    form.setFieldValue(columnKey, ids[0])\n                  }\n\n                }\n              }} />\n          </Modal>\n        </>\n      }\n    }\n    return column\n  })\n\n  let wrapperOnFinish = useCallback((v) => {\n    onFinish(v);\n  })\n\n  const actionRef = useRef();\n  return <BetaSchemaForm\n    trigger={triggerCompoent}\n    formRef={actionRef}\n    onInit={onInit}\n    title={name}\n    layoutType='ModalForm'\n    columns={createColumns}\n    autoFocusFirstInput\n    submitTimeout={4000}\n    rowProps={{gutter: [16, 16]}}\n    colProps={{span: 24, }}\n    grid={true}\n    onFinish={v => {wrapperOnFinish(v);}}\n  >\n  </BetaSchemaForm>\n}\n\n\nexport default WriteForm;\n","import React, {useState, useEffect, useRef} from 'react';\nimport {PlusOutlined, } from '@ant-design/icons';\nimport {ProTable} from '@ant-design/pro-components';\nimport {Button, message, DatePicker, TimePicker, Space, Popconfirm} from 'antd';\nimport network from '../logic/network'\nimport ReadForm from './readForm'\nimport WriteForm from './writeForm'\nimport Consts from '../consts/consts'\nimport UIConsts from '../consts/uiConsts'\nimport customRender from './customRender'\nimport {isObj} from '../logic/util';\nimport Cascader from './cascader'\nimport RichText from './richEditor'\nimport ImageUploader from './imageUploader'\nconst {RangePicker} = DatePicker;\n\n\nexport default function DirtTable(props) {\n  // excludeIds: default self id\n  let {entityName, onSelected, rowSelection, readOnly} = props;\n  rowSelection = rowSelection || {}\n  let [columns, setColumns] = useState([]);\n  let [columnKeyMap, setColumnKeyMap] = useState({})\n\n\n  // 给 header 加点料，如加上新的 render，以支持在不同的场景下，渲染不同的组件，典型如：日期在创建时，是选择具体的值，但在搜索时，经常性是个范围。\n  const redefineHeader = (headers, c) => {\n    const {title, idOfEntity: cls, dataIndex, relation} = c\n\n    // json object 与 json 有区别。服务器过来的是 json，json 不支持key为数字，只能放在值里，如果前端需要，先放值里，再转到 key\n    if (c.valueEnum) {\n      c.valueEnum = Object.entries(c.valueEnum).reduce((a, [k, c]) => {a[c.status] = c; return a;}, {})\n    }\n\n    // 自定义搜索栏\n    if (c.searchType != null) {\n      c.renderFormItem = (item, {type, defaultRender, formItemProps, fieldProps, ...rest}, form) => {\n        if (c.searchType.valueType === UIConsts.cascader) {\n          return <Cascader.SearchView idOfEntity={c.idOfEntity} subTreeName={c.subTreeName} onValueSet={(valueArrays, optionArrays) => {\n            const v = valueArrays?.slice(-1)?.[0]\n            if (v) form.setFieldValue(dataIndex, {id: v})\n          }} />\n        }\n        if (c.searchType.valueType === 'dateTimeRange') {\n          return <RangePicker showTime />\n        } else if (c.searchType.valueType === 'dateRange') {\n          return <RangePicker />\n        } else if (c.searchType.valueType === 'timeRange') {\n          return <TimePicker.RangePicker />\n        }\n      }\n    }\n\n\n    // 自定义 table row\n    // 1.　relation 关系处理优先级更高\n    if (relation === Consts.OneToOne || relation === Consts.ManyToOne) {\n      c['render'] = (text, record, index) => {return customRender.table(title, cls, record[dataIndex]);}\n      return c;\n    }\n    else if (relation === Consts.OneToMany || relation === Consts.ManyToMany) {\n      c['render'] = (text, record, index) => {\n        return record[dataIndex]?.map(d => {return customRender.table(title, cls, d)})\n      }\n      return c;\n    }\n    // 2. 然后是自定义 table row\n    if (c.valueType === UIConsts.richtext) {\n      c['render'] = (text, record, index) => {\n        return <RichText.TableRowView value={record[dataIndex]} />\n      }\n      return c;\n    }\n    if (c.valueType === UIConsts.imageUploader) {\n      c['render'] = (text, record, index) => {\n        return <ImageUploader.TableRowView value={record[dataIndex]} />\n      }\n      return c;\n    }\n\n    // 生成 id 关连的实际 entity 详情跳转\n    // 可以是多对一的关系，也可以是纯 id\n    if (cls) {\n      let key = c[\"key\"]\n      c['render'] = (text, record, index) => {\n        const target = record[dataIndex]\n        if (target && Array.isArray(target)) {\n          return <> {target.map(r => <ReadForm key={r.id} title={title} id={r.id} cls={cls} />)} </>\n        }\n        else if (isObj(target)) {\n          const rid = target?.id;\n          return rid ? <ReadForm key={rid} title={title} id={rid} cls={cls} /> : '';\n        }\n        else {\n          const rid = target;\n          return rid ? <ReadForm key={rid} title={title} id={rid} cls={cls} /> : '';\n        }\n      }\n    }\n\n    // 处理 actions\n    if (c[\"actions\"]) {\n      c['render'] = (text, record, index) => Object.entries(c[\"actions\"]).map(([key, action]) => generateAction(headers, action, record, index));\n    }\n\n\n    return c;\n  }\n\n  useEffect(() => {\n    (async () => {\n      let headers = await network.getTableHeadersAsync(entityName)\n      if (readOnly) {\n        headers = headers.filter(c => c['title'] !== '操作')\n      }\n      headers = headers.map(c => {return redefineHeader(headers, c);});\n\n      // 形成 key 为键的 headers，方便一些取值，比如：在 searchForm 里生成 filter 参数时\n      let maps = headers.reduce((a, c) => {a[c.key] = c; return a;}, columnKeyMap);\n\n\n      setColumnKeyMap(maps)\n\n      setColumns(headers)\n\n    })()\n  }, [columnKeyMap, entityName]);\n\n\n  const searchAsyncWrapper = async (params = {}, sort, filter) => {\n    return network.searchAsync(entityName, columnKeyMap, params, sort, filter)\n\n    // return new Promise(\n    //   (resolve, reject) => {\n    //     resolve({\n    //       data: result.data.filter(d => d.id != excludeId),\n    //       total: result.total,\n    //       success: result.success\n    //     });\n    //   }\n    // );\n  }\n\n  const generateCreateForm = () => {\n    let submitTypes = columns\n      .filter(c => c.submitType != null)\n      .map(c => c.submitType)\n      .map(c => {\n        // TODO:  定义 ManyToOne OneToMany 的 render 筛选器\n        return c;\n      })\n      .sort((a, b) => a.index - b.index);\n    return <WriteForm entityName={entityName} name=\"创建\" columns={submitTypes}\n      onFinish={values =>\n        network.createAsync(entityName, values, () => {actionRef.current.reload()})\n      }\n      triggerCompoent={<Button type=\"primary\"> <PlusOutlined /> 创建 </Button>} />\n  }\n\n  const generateAction = (headers, action, record, index) => {\n    let key = action.key\n    let text = action.text\n    if (key === 'edit' || key === 'detail') {\n\n      let formData = headers\n        //  只剔除  actions\n        .filter(c => c[\"actions\"] == null)\n        //  取出 submitType\n        .map(c => c.submitType)\n        //   过滤掉 null\n        .filter(c => c)\n        .sort((a, b) => a.index - b.index);\n      // 增加 id  显示\n      formData.splice(0, 0, {\n        \"index\": 10000,\n        \"width\": \"lg\",\n        \"key\": \"id\",\n        \"placeholder\": \"\",\n        \"submitable\": true,\n        \"valueType\": \"digit\",\n        \"title\": \"id\",\n        \"tooltip\": \"id\",\n        \"readonly\": true,\n        \"valueEnum\": null,\n        \"colProps\": {\n          \"md\": 12\n        },\n        \"initialValue\": record.id\n      });\n      formData = formData.map(d => {\n        d.initialValue = record[d.key];\n        return d;\n      })\n        .sort((a, b) => a.index - b.index);\n\n      // console.log(headers, action, record, index)\n      let isDetailed = key === 'detail'\n\n      // 只读模式\n      // https://github.com/ant-design/pro-components/issues/3323\n\n      return <WriteForm entityName={entityName} key={key} name={text} readOnly={isDetailed} columns={formData}\n        onFinish={(postdata) =>\n          network.updateAsync(entityName, postdata, () => {\n            actionRef.current.reload();\n          }\n          )\n        } triggerCompoent={<a> {text} </a>} />\n    }\n    else if (key === 'delete') {\n\n      return <Popconfirm key={key} title=\"确定删除?\" onConfirm={async () => {\n        network.deleteByIdAsync(entityName, record.id, () => {\n          actionRef.current.reload();\n        })\n      }}>\n        {<span className='link delete'> {text} </span>}\n      </Popconfirm>\n    } else {\n      // action\n      const entries = Object.entries(action.argColumnsMap)\n\n      // action 是否显示\n      if (key in record && !record[key]) {\n        return\n      }\n      if (entries.length == 0) {\n        // 自定义 action 不带任何参数\n        return <a key={key} onClick={() => {\n          doAction(text, {\n            entityName,\n            actionName: key,\n            id: record.id\n          });\n        }}>{text}</a>\n      } else {\n        //  自定义action 带参数，弹出 form 由用户输入\n        let actionFormArgs = entries.reduce((a, [k, v]) => {a.push(v); return a;}, [])\n        // console.log(actionFormArgs)\n        return <WriteForm entityName={entityName} key={key} name={text} columns={action.argColumnsMap.args} onFinish={(postdata) => {\n          doAction(text, {\n            entityName,\n            actionName: key,\n            id: record.id,\n            args: {args: postdata}\n          })\n        }\n        } triggerCompoent={<a href=\"#!\"> {text} </a>} />\n\n      }\n    }\n  }\n\n  const doAction = async (text, params) => {\n\n    let res = await network.actionAsync(params, () => {\n      message.success(`${text} 成功`);\n      actionRef.current.reload();\n    })\n    // if (res.data.code === 0) {\n    //   if (res.data) {\n    //     message.success(`${text} 成功`);\n    //     actionRef.current.reload();\n    //   }\n    // } else {\n    //   message.error(`${text}  失败`);\n    // }\n  }\n  // 用来操作 ProTable\n  // https://procomponents.ant.design/components/table/#actionref-%E6%89%8B%E5%8A%A8%E8%A7%A6%E5%8F%91\n  const actionRef = useRef();\n\n\n  return (columns && <ProTable\n    key={entityName}\n    scroll={{x: columns.length * 200}}\n    columns={columns}\n    actionRef={actionRef}\n    cardBordered\n    request={searchAsyncWrapper}\n    editable={{type: 'multiple', }}\n    columnsState={{\n      persistenceKey: 'Dirt',\n      persistenceType: 'localStorage',\n      onChange(value) {},\n    }}\n    rowKey=\"id\"\n    search={{labelWidth: 'auto', }}\n    options={{setting: {listsHeight: 400, }, }}\n    form={{\n      // 由于配置了 transform，提交的参与与定义的不同这里需要转化一下\n      // 这个地方会改变 url，可以在一定程度上通过 url 保持 form 的状态\n      syncToUrl: (values, type) => {return false;},\n    }\n    }\n    pagination={\n      {\n        pageSize: 10,\n        onChange: (page) => console.log(page),\n      }\n    }\n    dateFormatter=\"string\"\n    headerTitle=\"\"\n    toolBarRender={() => [generateCreateForm()]}\n\n    // 自定义选择项参考: https://ant.design/components/table-cn/#components-table-demo-row-selection-custom\n    rowSelection={{...rowSelection}}\n\n    tableAlertRender={({selectedRowKeys, selectedRows, onCleanSelected}) => (\n      <Space size={24} >\n\n        <span>\n          已选 {selectedRowKeys.length} 项\n          [{\n            selectedRowKeys.map(id => customRender.readForm(id, entityName, id))\n          }]\n          <a href=\"#!\" style={{marginInlineStart: 16}} onClick={() => network.deleteByIdsAsync(\n            {\n              entityName,\n              ids: selectedRowKeys\n            }, () => {\n              onCleanSelected()\n              actionRef.current.reload()\n            }\n          )}>远程删除</a>\n          <a href=\"#!\" style={{marginInlineStart: 16}} onClick={onCleanSelected}>导出数据</a>\n          {onSelected && <a href=\"#!\" style={{marginInlineStart: 16}} onClick={e => onSelected(selectedRows)}>选择</a>}\n        </span>\n      </ Space>\n    )}\n  />\n  );\n};\n","import React, {useState, useEffect} from 'react';\nimport {CarryOutOutlined, FormOutlined} from '@ant-design/icons';\nimport {Switch, Tree} from 'antd';\nimport Table from './dirtTable';\nimport network from '../logic/network';\nconst treeData = [\n  {\n    title: 'parent 1',\n    key: '0-0',\n    icon: <CarryOutOutlined />,\n    children: [\n      {\n        title: 'parent 1-0',\n        key: '0-0-0',\n        icon: <CarryOutOutlined />,\n        children: [\n          {\n            title: 'leaf',\n            key: '0-0-0-0',\n            icon: <CarryOutOutlined />,\n          },\n          {\n            title: (\n              <>\n                <div>one line title</div>\n              </>\n            ),\n            key: '0-0-0-1',\n            icon: <CarryOutOutlined />,\n          },\n          {\n            title: 'leaf',\n            key: '0-0-0-2',\n            icon: <CarryOutOutlined />,\n          },\n        ],\n      },\n      {\n        title: 'parent 1-1',\n        key: '0-0-1',\n        icon: <CarryOutOutlined />,\n        children: [\n          {\n            title: 'leaf',\n            key: '0-0-1-0',\n            icon: <CarryOutOutlined />,\n          },\n        ],\n      },\n      {\n        title: 'parent 1-2',\n        key: '0-0-2',\n        icon: <CarryOutOutlined />,\n        children: [\n          {\n            title: 'leaf',\n            key: '0-0-2-0',\n            icon: <CarryOutOutlined />,\n          },\n          {\n            title: 'leaf',\n            key: '0-0-2-1',\n            icon: <CarryOutOutlined />,\n            switcherIcon: <FormOutlined />,\n          },\n        ],\n      },\n    ],\n  },\n  {\n    title: 'parent 2',\n    key: '0-1',\n    icon: <CarryOutOutlined />,\n    children: [\n      {\n        title: 'parent 2-0',\n        key: '0-1-0',\n        icon: <CarryOutOutlined />,\n        children: [\n          {\n            title: 'leaf',\n            key: '0-1-0-0',\n            icon: <CarryOutOutlined />,\n          },\n          {\n            title: 'leaf',\n            key: '0-1-0-1',\n            icon: <CarryOutOutlined />,\n          },\n        ],\n      },\n    ],\n  },\n];\n\nconst App = (props) => {\n  const {entityName} = props;\n  const [showLine, setShowLine] = useState(true);\n  const [showIcon, setShowIcon] = useState(false);\n  const [showLeafIcon, setShowLeafIcon] = useState(true);\n  const [data, setData] = useState(treeData);\n\n  const dataAdapter = (ds) => {\n    var obj = JSON.parse(JSON.stringify(ds)\n      .replaceAll(\"\\\"name\\\":\", \"\\\"title\\\":\")\n      .replaceAll(\"\\\"subMenus\\\":\", \"\\\"children\\\":\")\n      .replaceAll(\"\\\"id\\\":\", \"\\\"key\\\":\")\n\n    );\n    console.log(obj)\n    return obj;\n  }\n\n  useEffect(() => {\n    (async () => {\n      const data = await network.getDataAsync('com.zk.mall.entity.Menu', 1)\n      setData(dataAdapter(data).children)\n    }\n    )()\n  }, [])\n  const onSelect = (selectedKeys, info) => {\n    console.log('selected', selectedKeys, info);\n  };\n\n\n\n  return (\n    <>\n      <div style={{display: 'flex'}}>\n        <div style={{width: '20%'}}>\n          <Tree\n            showLine={showLine}\n            showIcon={showIcon}\n            defaultExpandedKeys={['0-0-0']}\n            onSelect={onSelect}\n            treeData={data}\n          />\n        </div>\n        <div style={{width: '79%', height: '100vh'}}>\n          < Table entityName={entityName} />\n        </div>\n      </div>\n\n    </>\n  );\n};\n\nexport default App;\n","import React, {useState, useEffect,useSearchParams} from \"react\";\nimport 'antd/dist/antd.css';\nimport './App.css'\nimport axios from 'axios'\nimport Table from './components/dirtTable'\nimport qs from 'qs'\nimport Tree from './components/tree'\n\nfunction App() {\n  let [tables, setTables] = useState({})\n  let entityName =qs.parse(window.location.search, { ignoreQueryPrefix: true }).entityName\n  entityName=entityName \n\n  const [title, setTitle] = useState(null);\n  const [viewType, setViewType] = useState('Table');\n  \n  \n  \n  \n  useEffect(() => {\n    (async () => {\n      let data = await axios.get(`getTableMaps`)\n      setTables(data.data);\n      if(entityName!=null)\n        setTitle(data.data[entityName].text)\n    })()\n  }, [])\n  return (\n     <div >\n      {\n        Object.keys(tables).length > 0 && Object.entries(tables).map(([t, v]) => {\n          return <a key={t} href=\"#!\" onClick={e => {\n            // window.location.entityName = v.className;\n          window.location.search = \"entityName=\"+v.className;\n\n          }}>{v.text} |</a>\n        })\n      }\n      <h1>{title}</h1>\n      <hr style={{marginBottom: '25px'}} />\n      {viewType === 'Table' && (< Table entityName={entityName} />)}\n      {viewType === 'Tree' && (< Table entityName={entityName} />)}\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n"],"sourceRoot":""}